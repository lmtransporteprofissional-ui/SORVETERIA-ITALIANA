<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Italiana Sorvetes</title>
  <link id="faviconLink" rel="icon" type="image/x-icon" href="">
  <style>
    :root{
      --red:#C62828; --red-700:#8E1D1D;
      --green:#2E7D32; --green-700:#1B5E20;
      --bg:#fffdfc; --card:#ffffff; --text:#222; --muted:#666; --border:#eaeaea; --chip:#FFF3F3;
    }
    *{box-sizing:border-box}
    body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; color:var(--text); background:linear-gradient(180deg,#fff,var(--bg)); }
    header{ padding:16px; background:var(--card); border-bottom:3px solid var(--red); position:sticky; top:0; z-index:10; }
    .container{max-width:1100px; margin:0 auto; padding:0 16px}
    .brand{display:flex; align-items:center; gap:14px}
    .logo{height:48px; width:auto; object-fit:contain}
    h1{margin:0; font-size:1.85rem}
    .tagline{color:var(--muted); margin:2px 0 0}

    .hero{margin:12px auto 0; max-width:1100px; padding:0 16px}
    .hero img{width:100%; height:auto; border-radius:12px; border:1px solid var(--border); display:block}

    .grid{ display:grid; grid-template-columns:1fr; gap:16px; margin-top:16px; }
    @media(min-width:960px){ .grid{ grid-template-columns: 2fr 1fr; } }
    .products{ display:grid; grid-template-columns:1fr; gap:16px; }
    @media(min-width:720px){ .products{ grid-template-columns: repeat(2, 1fr); } }
    .card{ background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px; box-shadow:0 1px 2px rgba(0,0,0,.04); }
    .pimg-wrap{width:100%; aspect-ratio:16/9; background:#fff; border:1px solid var(--border); border-radius:10px; overflow:hidden; margin-bottom:10px; display:flex; align-items:center; justify-content:center; color:#999; font-size:.9rem}
    .pimg{width:100%; height:100%; object-fit:cover; display:block}
    .title{margin:0 0 6px; font-size:1.1rem}
    .price{color:var(--red); font-weight:800; margin-bottom:10px}
    label{display:block; font-size:.9rem; color:var(--muted); margin-bottom:6px}
    select, input[type="number"], input[type="text"]{ width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:8px; font-size:1rem; background:#fff; }
    .row{display:grid; grid-template-columns: 1fr 120px; gap:12px; margin-top:8px}
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border:none; border-radius:10px; cursor:pointer; font-weight:700; letter-spacing:.2px }
    .btn-primary{ background:var(--red); color:#fff }
    .btn-primary:hover{ background:var(--red-700) }
    .btn-success{ background:var(--green); color:#fff }
    .btn-success:hover{ background:var(--green-700) }
    .btn-ghost{ background:transparent; color:var(--red); border:1px solid var(--red); }

    aside.cart{ position:sticky; top:88px; align-self:start; background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px; }
    .cart h3{margin:0 0 12px}
    .cart-empty{color:var(--muted); font-size:.95rem; background:var(--chip); padding:10px; border-radius:8px}
    .cart-items{display:flex; flex-direction:column; gap:10px; margin:10px 0}
    .cart-item{display:flex; justify-content:space-between; gap:10px; padding:10px; border:1px dashed var(--border); border-radius:8px; background:#fff}
    .cart-item small{color:var(--muted)}
    .cart-total{display:flex; justify-content:space-between; font-weight:800; margin:12px 0}
    .cart-total span:last-child{color:var(--green)}
    .footer-note{font-size:.9rem; color:var(--muted); margin-top:6px}
    .chip{display:inline-block; font-size:.8rem; padding:4px 8px; background:var(--chip); color:var(--red); border-radius:999px; border:1px solid #f5dada; font-weight:700}

    .addr{ display:flex; flex-direction:column; gap:10px; margin:12px 0 }
    .addr-row{ display:grid; grid-template-columns: 1.3fr 1.7fr; gap:10px }
    @media (max-width: 480px){ .addr-row{ grid-template-columns:1fr; } }
    .req{ color:var(--red); font-weight:800 }
    .error{ color:var(--red); font-size:.85rem; margin-top:4px; display:none }
    .is-invalid{ border-color: var(--red); box-shadow:0 0 0 3px rgba(198,40,40,.08) }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <img id="logoImg" class="logo" src="" alt="Logo Italiana Sorvetes" onerror="this.style.display='none'">
        <div>
          <h1>üç® Italiana Sorvetes</h1>
          <p class="tagline">Sabor e tradi√ß√£o italiana em cada colher</p>
        </div>
      </div>
    </div>
  </header>

  <section class="hero">
    <img id="heroImg" src="" alt="Banner Italiana Sorvetes" onerror="this.style.display='none'">
  </section>

  <main class="container">
    <div class="grid">
      <section>
        <div class="products" id="products"></div>
      </section>

      <aside class="cart" id="cart">
        <h3>üõí Carrinho de Compras <span class="chip">Frete a combinar</span></h3>
        <div id="cartBody"><p class="cart-empty">Seu carrinho est√° vazio.</p></div>
        <div class="cart-total"><span>Total</span><span id="cartTotal">R$ 0,00</span></div>

        <!-- Dados de entrega -->
        <div>
  <label for="addrLogradouro">Endere√ßo de entrega <span class="req">*</span></label>
  <input type="text" id="addrLogradouro" placeholder="Rua, avenida, lote, complemento..." aria-required="true">
  <div id="enderecoError" class="error">Endere√ßo de entrega √© obrigat√≥rio.</div>
</div>
<div class="addr-row">
  <div>
    <label for="addrNumero">N√∫mero <span class="req">*</span></label>
    <input type="text" id="addrNumero" placeholder="Ex.: 123" aria-required="true">
    <div id="numeroError" class="error">N√∫mero √© obrigat√≥rio.</div>
     </div>
            <div>
              <label for="addrReferencia">Ponto de refer√™ncia <span class="req">*</span></label>
              <input type="text" id="addrReferencia" placeholder="Ex.: Pr√≥ximo ao posto X ou padaria Y" aria-required="true">
              <div id="refError" class="error">Ponto de refer√™ncia √© obrigat√≥rio.</div>
            </div>
          </div>
        </div>

        <div style="display:flex; gap:8px; flex-wrap:wrap">
          <button class="btn btn-ghost" id="clearCart">Limpar</button>
          <button class="btn btn-success" id="checkout">Finalizar pedido via WhatsApp</button>
        </div>
        <p class="footer-note">Confirme sabores e dados de entrega antes de finalizar üòâ</p>
      </aside>
    </div>
  </main>

  <script>
    const WHATSAPP_NUMBER = '5521964816872';
    const CURRENCY = new Intl.NumberFormat('pt-BR', { style:'currency', currency:'BRL' });

    // üîÅ TROQUE pelos nomes reais dos arquivos no seu servidor (use caminho relativo ./)
    const imagens = {
      logo: './logo.png',
      hero: './hero.jpg',
      favicon: './favicon.ico',
      sorvete5: './sorvete-5l.png',
      sorvete10: './sorvete-10l.png',
      copos250: './copos-250ml.png',
      sorvete2: './sorvete-2l.png',
      copos500: './copos-500ml.png',
      picoleTrad: './picole-tradicional.png',
      picoleSkimo: './picole-skimo.png',
      acai2: './acai-2l.png',
      acai5: './acai-5l.png',
      acai10: './acai-10l.png',
    };

    // favicon, logo, hero
    (function applyBrandImages(){
      const fav = document.getElementById('faviconLink');
      const logo = document.getElementById('logoImg');
      const hero = document.getElementById('heroImg');
      if (imagens.favicon) fav.href = imagens.favicon;
      if (imagens.logo) logo.src = imagens.logo;
      if (imagens.hero) hero.src = imagens.hero;
    })();

    const saboresComuns = [
      'Napolitano','Flocos','Creme','Morango','Chocolate','Chocolate Trufado',
      'Passas ao rum','Torta alem√£','Torta de lim√£o','Maracuj√°','Ferrero Rocher',
      'Rafaello','Frutas Vermelhas','Leitinho Trufado'
    ];
    const saboresCopos = [
      'Coco','Chocolate','Morango','Creme','Flocos','Sundae',
      'Maracuj√°','Napolitano','Galak','Passas ao rum'
    ];
    const saboresPicoleTrad = [
      'Abacate','Abacaxi','Ab√≥bora com coco','A√ßa√≠','Amendoim','Banana com aveia','Blue ice','Brigadeiro',
      'Chocolate','Coco','Cupua√ßu','Flocos','Goiaba','Graviola','Leite condensado','Lim√£o',
      'Manga','Maracuj√°','Milho verde','Morango','Passas ao rum','Queijo','Tapioca','Tutti frutti','Uva'
    ];
    const saboresSkimo = ['Brigadeiro','Coco','Morango','Maracuj√°','Nata'];
    const saboresAcai = ['Banana','Morango','Natural'];
    const saboresAcai2 = ['Banana','Morango'];

    const catalogo = [
      { id:'sorvete5',   nome:'Sorvete 5 Litros',                  preco:45, sabores:saboresComuns },
      { id:'sorvete10',  nome:'Sorvete 10 Litros',                 preco:80, sabores:saboresComuns },
      { id:'copos250',   nome:'Sorvete em Copos ‚Äì 250ml (12 un.)', preco:32, sabores:saboresCopos },
      { id:'sorvete2',   nome:'Sorvete 2 Litros',                  preco:25, sabores:saboresComuns },
      { id:'copos500',   nome:'Sorvete em Copos ‚Äì 500ml (8 un.)',  preco:32, sabores:saboresCopos },
      { id:'picoleTrad', nome:'Picol√© Tradicional ‚Äì Caixa c/ 20',   preco:22, sabores:saboresPicoleTrad },
      { id:'picoleSkimo',nome:'Picol√© Skimo ‚Äì Caixa c/ 18',         preco:38, sabores:saboresSkimo },
      { id:'acai2',      nome:'A√ßa√≠ ‚Äì 2 Litros',                    preco:25, sabores:saboresAcai2 },
      { id:'acai5',      nome:'A√ßa√≠ ‚Äì 5 Litros',                    preco:50, sabores:saboresAcai },
      { id:'acai10',     nome:'A√ßa√≠ ‚Äì 10 Litros',                   preco:90, sabores:saboresAcai },
    ];

    let carrinho = [];

    // ‚öôÔ∏è RENDER DE PRODUTOS (sem {srcImg}, usando concatena√ß√£o segura)
    function renderProdutos(){
      const wrap = document.getElementById('products');
      wrap.innerHTML = '';
      catalogo.forEach(prod => {
        const card = document.createElement('div');
        card.className = 'card';

        const srcImg = imagens[prod.id] || '';
        const imgHtml = srcImg
          ? '<img class="pimg" src="' + srcImg + '" alt="Foto de ' + prod.nome + '">'
          : '<span>Imagem n√£o configurada</span>';

        card.innerHTML =
          '<div class="pimg-wrap">' + imgHtml + '</div>' +
          '<h4 class="title">' + prod.nome + '</h4>' +
          '<div class="price">' + CURRENCY.format(prod.preco) + '</div>' +

          '<label for="sabor-' + prod.id + '">Sabor</label>' +
          '<select id="sabor-' + prod.id + '">' +
            prod.sabores.map(s => '<option value="' + s + '">' + s + '</option>').join('') +
          '</select>' +

          '<div class="row">' +
            '<div>' +
              '<label for="qtd-' + prod.id + '">Quantidade</label>' +
              '<input type="number" id="qtd-' + prod.id + '" min="1" value="1">' +
            '</div>' +
            '<div style="display:flex; align-items:flex-end;">' +
              '<button class="btn btn-primary" data-add="' + prod.id + '">Adicionar</button>' +
            '</div>' +
          '</div>';

        wrap.appendChild(card);
      });

      wrap.querySelectorAll('[data-add]').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.getAttribute('data-add');
          const prod = catalogo.find(p => p.id === id);
          const sabor = document.getElementById('sabor-' + id).value;
          const qtd = parseInt(document.getElementById('qtd-' + id).value || '0', 10);
          if(!qtd || qtd < 1){ alert('Informe uma quantidade v√°lida.'); return; }

          const key = id + '|' + sabor;
          const existente = carrinho.find(i => i.key === key);
          if(existente){ existente.qtd += qtd; }
          else { carrinho.push({ key, id, nome:prod.nome, sabor, preco:Number(prod.preco), qtd:Number(qtd) }); }
          renderCarrinho();
        });
      });
    }

    function renderCarrinho(){
      const body = document.getElementById('cartBody');
      const totalEl = document.getElementById('cartTotal');

      if(carrinho.length === 0){
        body.innerHTML = '<p class="cart-empty">Seu carrinho est√° vazio.</p>';
        totalEl.textContent = CURRENCY.format(0);
        return;
      }

      const list = document.createElement('div');
      list.className = 'cart-items';

      let total = 0;
      carrinho.forEach((item, idx) => {
        const sub = Number(item.preco) * Number(item.qtd);
        total += sub;

        const li = document.createElement('div');
        li.className = 'cart-item';
        li.innerHTML =
          '<div>' +
            '<div><strong>' + item.nome + '</strong> ‚Äî ' + CURRENCY.format(item.preco) + ' <small>/un</small></div>' +
            '<small>Sabor: ' + item.sabor + '</small>' +
            '<div style="margin-top:6px; display:flex; gap:6px; align-items:center;">' +
              '<small>Qtd:</small>' +
              '<input type="number" min="1" value="' + item.qtd + '" data-qtd="' + idx + '" style="width:80px; padding:6px 8px; border:1px solid #eee; border-radius:6px;">' +
              '<button class="btn btn-ghost" data-rem="' + idx + '">Remover</button>' +
            '</div>' +
          '</div>' +
          '<div style="text-align:right"><div>' + CURRENCY.format(sub) + '</div></div>';

        list.appendChild(li);
      });

      body.innerHTML = '';
      body.appendChild(list);
      totalEl.textContent = CURRENCY.format(total);

      body.querySelectorAll('[data-rem]').forEach(btn => {
        btn.addEventListener('click', () => {
          const idx = parseInt(btn.getAttribute('data-rem'), 10);
          carrinho.splice(idx, 1);
          renderCarrinho();
        });
      });
      body.querySelectorAll('[data-qtd]').forEach(inp => {
        inp.addEventListener('change', () => {
          const idx = parseInt(inp.getAttribute('data-qtd'), 10);
          const v = parseInt(inp.value || '0', 10);
          if(!v || v < 1){ inp.value = carrinho[idx].qtd; return; }
          carrinho[idx].qtd = v;
          renderCarrinho();
        });
      });
    }

    function validarReferencia(){
      const ref = document.getElementById('addrReferencia');
      const err = document.getElementById('refError');
      const ok = ref.value.trim().length > 0;
      if(!ok){ ref.classList.add('is-invalid'); err.style.display = 'block'; }
      else   { ref.classList.remove('is-invalid'); err.style.display = 'none'; }
      return ok;
    }
    function validarEndereco() {
  const endereco = document.getElementById('addrLogradouro');
  const err = document.getElementById('enderecoError');
  const ok = endereco.value.trim().length > 0;
  if(!ok){ endereco.classList.add('is-invalid'); err.style.display = 'block'; }
  else   { endereco.classList.remove('is-invalid'); err.style.display = 'none'; }
  return ok;
}
function validarNumero() {
  const numero = document.getElementById('addrNumero');
  const err = document.getElementById('numeroError');
  const ok = numero.value.trim().length > 0;
  if(!ok){ numero.classList.add('is-invalid'); err.style.display = 'block'; }
  else   { numero.classList.remove('is-invalid'); err.style.display = 'none'; }
  return ok;
}
    
    document.getElementById('addrReferencia').addEventListener('input', validarReferencia);

    function finalizarWhatsApp(){
  if(carrinho.length === 0){ 
    alert('Seu carrinho est√° vazio.'); 
    return; 
  }
  const okEndereco = validarEndereco();
  const okNumero = validarNumero();
  const okRef = validarReferencia();
  if(!okEndereco) { 
    document.getElementById('addrLogradouro').focus(); 
    return; 
  }
  if(!okNumero) { 
    document.getElementById('addrNumero').focus(); 
    return; 
  }
  if(!okRef){ 
    document.getElementById('addrReferencia').focus(); 
    return; 
  }

  const end = document.getElementById('addrLogradouro').value.trim();
  const num = document.getElementById('addrNumero').value.trim();
  const ref = document.getElementById('addrReferencia').value.trim();

  const linhas = [];
  linhas.push('*Pedido ‚Äì Italiana Sorvetes*');
  carrinho.forEach(item => {
    const sub = Number(item.preco) * Number(item.qtd);
    linhas.push('‚Ä¢ ' + item.nome + ' | Sabor: ' + item.sabor + ' | Qtd: ' + item.qtd + ' | Subtotal: ' + CURRENCY.format(sub));
  });
  const total = carrinho.reduce((acc, i) => acc + Number(i.preco) * Number(i.qtd), 0);
  linhas.push('');
  linhas.push('*Total:* ' + CURRENCY.format(total));
  linhas.push('');
  linhas.push('*Dados de entrega*');
  linhas.push('Endere√ßo: ' + (end || '-'));
  linhas.push('N√∫mero: ' + (num || '-'));
  linhas.push('Ponto de refer√™ncia: ' + ref);
  linhas.push('');
  linhas.push('_Envie seu nome para finalizarmos._');

  const msg = encodeURIComponent(linhas.join('\n'));
  const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;
  window.open(url, '_blank');
}

    document.getElementById('checkout').addEventListener('click', finalizarWhatsApp);
    document.getElementById('clearCart').addEventListener('click', () => { carrinho = []; renderCarrinho(); });

    // Inicializa√ß√£o
    renderProdutos();
    renderCarrinho();

    // Log √∫til para conferir caminhos
    console.table(imagens);
  </script>
</body>










